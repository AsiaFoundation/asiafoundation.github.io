<!-- jQuery -->
<script src="js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="js/custom.js"></script>

<!-- D3 -->
<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
<!--
  <script src="/js/d3.geo.projection.v0.min.js"></script>
-->

<script type="text/javascript">
  var width = 1000, height = 600;

  var projection = d3.geo.mercator()
    .scale(400)
    .translate([-200, 450])
    .precision(0.0001);

  var path = d3.geo.path()
    .projection(projection);

  var tooltip = d3.select('#mapper').append('div')
    .attr('class', 'hidden tooltip');

  var svg = d3.select("#mapper").append("svg")
    .attr("width", width)
    .attr("height", height);

  d3.json("/asiafoundation.github.io/js/countries.geo.json", function(error, countries) {
    if (error) {
      throw error;
    }

    svg.selectAll("svg")
      .data(countries.features)
      .enter()
      .append("path")
      .attr("class", function(d) {
        return "country";
      })
      .attr("d", path)
      .on('mousemove', function(d) {
        var mouse = d3.mouse(svg.node()).map(function(d) {
          return parseInt(d);
        });
        tooltip.classed('hidden', false)
          .attr('style', 'left:' + (mouse[0] + 15) +
                'px; top:' + (mouse[1] - 35) + 'px')
          .html(d.properties.name);
      })
      .on('mouseout', function() {
        tooltip.classed('hidden', true);
      });
  });
</script>
